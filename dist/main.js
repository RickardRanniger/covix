(()=>{"use strict";var o,n;!function(o){o[o.UP=0]="UP",o[o.RIGHT=90]="RIGHT",o[o.DOWN=180]="DOWN",o[o.LEFT=270]="LEFT"}(o||(o={})),function(o){o.T="#800080",o.I="#00ffff",o.O="#ffff00",o.S="#00ff00",o.L="#ff7f00",o.J="#0000ff",o.Z="#ff0000"}(n||(n={}));var t={color:n.T,code:"T",0:[[0,1,0],[1,1,1]],90:[[1,0],[1,1],[1,0]],180:[[1,1,1],[0,1,0]],270:[[0,1],[1,1],[0,1]]},e=[t,{color:n.I,code:"I",0:[[0,1,0],[0,1,0],[0,1,0],[0,1,0]],90:[[0,0,0,0],[1,1,1,1]],180:[[0,1,0],[0,1,0],[0,1,0],[0,1,0]],270:[[0,0,0,0],[1,1,1,1]]},{color:n.O,code:"O",0:[[1,1],[1,1]],90:[[1,1],[1,1]],180:[[1,1],[1,1]],270:[[1,1],[1,1]]},{color:n.S,code:"S",0:[[0,1,1],[1,1,0]],90:[[1,0],[1,1],[0,1]],180:[[0,1,1],[1,1,0]],270:[[1,0],[1,1],[0,1]]},{color:n.Z,code:"Z",0:[[1,1,0],[0,1,1]],90:[[0,1],[1,1],[1,0]],180:[[1,1,0],[0,1,1]],270:[[0,1],[1,1],[1,0]]},{color:n.J,code:"J",0:[[1,0,0],[1,1,1]],90:[[1,1],[1,0],[1,0]],180:[[1,1,1],[0,0,1]],270:[[0,1],[0,1],[1,1]]},{color:n.L,code:"L",0:[[0,0,1],[1,1,1]],90:[[1,0],[1,0],[1,1]],180:[[1,1,1],[1,0,0]],270:[[1,1],[0,1],[0,1]]}],r=document.createElement("canvas"),l={position:{x:0,y:0},rotation:0,blockType:t},i=[];!function(o){for(var n=0;n<20;n++){o[n]=[];for(var t=0;t<10;t++)o[n][t]=null}}(i);var c=function(o,n){void 0===n&&(n=!1);for(var t=0;t<o.blockType[o.rotation].length;t++)for(var e=0;e<o.blockType[o.rotation][t].length;e++)o.blockType[o.rotation][t][e]};r.width=240,r.height=480,r.style.backgroundColor="black";var a=document.createElement("div");a.style.color="white",document.body.appendChild(a),document.body.appendChild(r),document.body.style.backgroundColor="gray";var u=null==r?void 0:r.getContext("2d"),f=0,d=0,s=500;addEventListener("keypress",(function(o){window.cancelAnimationFrame(d)}));var p=0,y=function(o,n,t,e){if(t+o.blockType[o.rotation].length>20)return!1;for(var r=0;r<o.blockType[e].length;r++)for(var l=0;l<o.blockType[e][r].length;l++)if(i[r+t][l+n]&&"static"===i[r+t][l+n].type&&1===o.blockType[e][r][l])return!1;return!0},h=function(o){setTimeout((function(){!function(){for(var o=0;o<i.length;o++)for(var n=0;n<i[o].length;n++)i[o][n]&&"active"===i[o][n].type&&(i[o][n]=null)}(),u.clearRect(0,0,r.width,r.height),c(l),function(){for(var o=0;o<i.length;o++)for(var n=0;n<i[o].length;n++)null!==i[o][n]&&(u.fillStyle=i[o][n].color,u.fillRect(24*n,24*o,24,24))}(),a.textContent="Frame: "+f.toString(),f++,o-p>s&&(p=o,y(l,l.position.x,l.position.y+1,l.rotation)?l.position.y++:(c(l,!0),function(){for(var o=[],n=0;n<i.length;n++)i[n].some((function(o){return!o}))||o.push(n);return o}().forEach((function(o){i.splice(o,1),i.unshift([null,null,null,null,null,null,null,null,null,null,null,null])})),l.blockType=e[Math.floor(Math.random()*e.length)],l.position.y=0,l.position.x=0)),d=window.requestAnimationFrame(h)}),1e3/30)};document.onkeyup=function(o){"ArrowDown"===o.code&&(s=500)},document.onkeydown=function(o){switch(o.code){case"ArrowRight":y(l,l.position.x+1,l.position.y,l.rotation)&&(l.position.x+=1);break;case"ArrowLeft":l.position.x-=1;break;case"ArrowDown":s=1;break;case"ArrowUp":var n=270===l.rotation?0:l.rotation+90;y(l,l.position.x,l.position.y,n)&&(l.rotation=n);break;case"Space":console.log(i)}},h(null)})();