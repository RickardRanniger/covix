(()=>{"use strict";var o,n,t,e,r,l,i,c,a;!function(o){o[o.UP=0]="UP",o[o.RIGHT=90]="RIGHT",o[o.DOWN=180]="DOWN",o[o.LEFT=270]="LEFT"}(c||(c={})),function(o){o.T="#800080",o.I="#00ffff",o.O="#ffff00",o.S="#00ff00",o.L="#ff7f00",o.J="#0000ff",o.Z="#ff0000"}(a||(a={}));var f=((o={color:a.T,code:"T"})[c.UP]=[[0,1,0],[1,1,1]],o[c.RIGHT]=[[1,0],[1,1],[1,0]],o[c.DOWN]=[[1,1,1],[0,1,0]],o[c.LEFT]=[[0,1],[1,1],[0,1]],o),u=[f,((n={color:a.I,code:"I"})[c.UP]=[[0,1,0],[0,1,0],[0,1,0],[0,1,0]],n[c.RIGHT]=[[0,0,0,0],[1,1,1,1]],n[c.DOWN]=[[0,1,0],[0,1,0],[0,1,0],[0,1,0]],n[c.LEFT]=[[0,0,0,0],[1,1,1,1]],n),((t={color:a.O,code:"O"})[c.UP]=[[1,1],[1,1]],t[c.RIGHT]=[[1,1],[1,1]],t[c.DOWN]=[[1,1],[1,1]],t[c.LEFT]=[[1,1],[1,1]],t),((e={color:a.S,code:"S"})[c.UP]=[[0,1,1],[1,1,0]],e[c.RIGHT]=[[1,0],[1,1],[0,1]],e[c.DOWN]=[[0,1,1],[1,1,0]],e[c.LEFT]=[[1,0],[1,1],[0,1]],e),((r={color:a.Z,code:"Z"})[c.UP]=[[1,1,0],[0,1,1]],r[c.RIGHT]=[[0,1],[1,1],[1,0]],r[c.DOWN]=[[1,1,0],[0,1,1]],r[c.LEFT]=[[0,1],[1,1],[1,0]],r),((l={color:a.J,code:"J"})[c.UP]=[[1,0,0],[1,1,1]],l[c.RIGHT]=[[1,1],[1,0],[1,0]],l[c.DOWN]=[[1,1,1],[0,0,1]],l[c.LEFT]=[[0,1],[0,1],[1,1]],l),((i={color:a.L,code:"L"})[c.UP]=[[0,0,1],[1,1,1]],i[c.RIGHT]=[[1,0],[1,0],[1,1]],i[c.DOWN]=[[1,1,1],[1,0,0]],i[c.LEFT]=[[1,1],[0,1],[0,1]],i)],d=document.createElement("canvas"),s={position:{x:0,y:0},rotation:0,blockType:f},p=[];!function(o){for(var n=0;n<20;n++){o[n]=[];for(var t=0;t<10;t++)o[n][t]=null}}(p);var T=function(o,n){void 0===n&&(n=!1);for(var t=0;t<o.blockType[o.rotation].length;t++)for(var e=0;e<o.blockType[o.rotation][t].length;e++)o.blockType[o.rotation][t][e]};d.width=240,d.height=480,d.style.backgroundColor="black";var y=document.createElement("div");y.style.color="white",document.body.appendChild(y),document.body.appendChild(d),document.body.style.backgroundColor="gray";var h=null==d?void 0:d.getContext("2d"),v=0,g=0,b=500;console.log("sdfsd"),addEventListener("keypress",(function(o){window.cancelAnimationFrame(g)}));var k=0,m=function(o,n,t,e){if(t+o.blockType[o.rotation].length>20)return!1;for(var r=0;r<o.blockType[e].length;r++)for(var l=0;l<o.blockType[e][r].length;l++)if(p[r+t][l+n]&&"static"===p[r+t][l+n].type&&1===o.blockType[e][r][l])return!1;return!0},w=function(o){setTimeout((function(){!function(){for(var o=0;o<p.length;o++)for(var n=0;n<p[o].length;n++)p[o][n]&&"active"===p[o][n].type&&(p[o][n]=null)}(),h.clearRect(0,0,d.width,d.height),T(s),function(){for(var o=0;o<p.length;o++)for(var n=0;n<p[o].length;n++)null!==p[o][n]&&(h.fillStyle=p[o][n].color,h.fillRect(24*n,24*o,24,24))}(),y.textContent="Frame: "+v.toString(),v++,o-k>b&&(k=o,m(s,s.position.x,s.position.y+1,s.rotation)?s.position.y++:(T(s,!0),function(){for(var o=[],n=0;n<p.length;n++)p[n].some((function(o){return!o}))||o.push(n);return o}().forEach((function(o){p.splice(o,1),p.unshift([null,null,null,null,null,null,null,null,null,null,null,null])})),s.blockType=u[Math.floor(Math.random()*u.length)],s.position.y=0,s.position.x=0)),g=window.requestAnimationFrame(w)}),1e3/30)};document.onkeyup=function(o){"ArrowDown"===o.code&&(b=500)},document.onkeydown=function(o){switch(o.code){case"ArrowRight":m(s,s.position.x+1,s.position.y,s.rotation)&&(s.position.x+=1);break;case"ArrowLeft":s.position.x-=1;break;case"ArrowDown":b=1;break;case"ArrowUp":var n=270===s.rotation?0:s.rotation+90;m(s,s.position.x,s.position.y,n)&&(s.rotation=n);break;case"Space":console.log(p)}},w(null)})();